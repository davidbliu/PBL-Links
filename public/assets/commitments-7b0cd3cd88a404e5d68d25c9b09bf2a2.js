function drawDays(){for(var t=0;t<days.length;t++){var e=document.createElement("div");$(e).addClass("day"),$(e).attr("id",t.toString());var a=document.createElement("div");$(a).addClass("day_header"),$(a).text(days[t]),$(e).append(a);for(var r=0;r<hours.length-1;r++){var o=document.createElement("div");$(o).addClass("hour"),$(o).attr("id",r+8),$(o).text(hours[r]+" - "+hours[r+1]),$(e).append(o)}$("#times").append(e)}}function hourActions(){$(".hour").click(function(){toggleSelected($(this))})}function markSlots(t){for(var e=0;7>e;e++)for(var a=e,r=0;r<t[a].length;r++){hour=t[a][r];var o=$("#"+a+" #"+hour);toggleSelected(o)}}function clearActions(){$("#clear-button").click(function(){$(".tracked_member").each(function(){$(this).remove(),updateTrackedChart()})})}function toggleSelected(t){if($(t).hasClass("selected")){$(t).css("background-color","white"),$(t).removeClass("selected");var e=$(t).parent().attr("id"),a=$(t).attr("id"),r=slots[e].indexOf(a);r>-1&&slots[e].splice(r,1)}else{$(t).addClass("selected"),$(t).css("background-color","rgb(129, 129, 127)");var e=$(t).parent().attr("id"),a=$(t).attr("id");slots[e].push(a)}}function clickingActions(){$(".hour").click(function(){toggleSelected($(this))}),$(".hour").mousedown(function(){clicking=!0,toggleSelected($(this))}),$(".hour").on("mouseover",function(){1==clicking&&toggleSelected($(this))}),$(document).mouseup(function(){clicking=!1})}function submitCommitments(){alert("submitting your updated commitments"),$.ajax({url:"/commitments/update_commitments",type:"GET",data:{slots:slots}}).done(function(){location.reload()}).fail(function(){alert("failed")})}function drawCMTable(){for(var t=0;t<days.length;t++){var e=document.createElement("div");$(e).addClass("day"),$(e).attr("id",t.toString());var a=document.createElement("div");$(a).addClass("day_header"),$(a).text(days[t]),$(e).append(a);for(var r=0;r<hours.length-1;r++){var o=document.createElement("div");$(o).addClass("hour"),$(o).attr("id",r+8),$(o).text(hours[r]+" - "+hours[r+1]),$(o).css("background-color","rgba(0, 0, 0, 0)"),$(e).append(o)}$("#cm_chart").append(e)}}function startTrackedActions(){$(".tracked_member").click(function(){$(this).remove(),updateTrackedChart()})}function updateTrackedChart(){unmarkAll(),$(".tracked_member").each(function(){var t=pbl_commitments[$(this).attr("id")];if(t)for(var e=0;e<t.length;e++){var a=t[e],r=$("#cm_chart").find(a);makeDarker(r),old_title=$(r).attr("title"),new_title=old_title+", "+reverse_member_hash[$(this).attr("id")],$(r).attr("title",new_title)}})}function makeDarker(t){var e=$(t).css("background-color"),a=e.lastIndexOf(","),r=e.slice(a+1,e.length-1),o=parseFloat(r)+.2,c=e.slice(0,a+1)+o+")";$(t).css("background-color",c)}function unmarkAll(){$("#cm_chart").find(".hour").each(function(){$(this).css("background-color","rgba(0,0,0,0)"),$(this).attr("title","")})}function startAutocomplete(){$("#member_search").autocomplete({source:member_names,select:function(t,e){var a=document.createElement("div");$(a).addClass("tracked_member"),$(a).attr("id",member_hash[e.item.value]),$(a).text(e.item.value),$("#tracked_list").prepend(a),updateTrackedChart(),startTrackedActions(),$(this).val("")}})}var clicking=!1,slots={};slots[0]=[],slots[1]=[],slots[2]=[],slots[3]=[],slots[4]=[],slots[5]=[],slots[6]=[];var days=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],hours=["8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11"];$(document).ready(function(){drawDays(),hourActions(),clickingActions(),$("#save_commitments").click(function(){submitCommitments()}),marked_slots&&markSlots(marked_slots),console.log("completed startup actions"),drawCMTable(),updateTrackedChart(),startAutocomplete(),startTrackedActions(),clearActions()});