<style type = 'text/css'>
.go-key-input{
	width:100px;
}
</style>

<script type = 'text/javascript'>
function pullEventCatalogue(){
	// pull data from /go/catalogue
	$.ajax({
      url: '/go/catalogue',
      type: 'GET',
      data: {},
      success:function(data){
        $('#catalogue-container').html(data);
      },
      error:function (xhr, textStatus, thrownError){
        $('#catalogue-container').html('<h1>Failed to load catalogue</h1>');
      }
  	});
}
function updateActions(){
	$('#add-go-link-btn').click(function(){
		
		key = $('#go-key-input').val();
		url = $('#go-url-input').val();
		description = $('#go-description-input').val();

		path = '/go/create'
		successFunction = function (data){
			location.reload();
		}
		errorFunction = function(){
			alert("Failed. Your link key may have already been assigned!");
		}
		data = {'key': key, 'url': url, 'description':description}
		makeAjaxRequest(path, 'POST', data, successFunction, errorFunction);

	});
}
/**
* to be performed on page load
*/
$(document).ready(function(){
	pullEventCatalogue();
	updateActions();
});
</script>

<%= link_to 'Back go Catalogue', '/go' %>
<h1>Add A New PBL Link</h1>
<button class = 'btn btn-default' id = 'add-go-link-btn'>Add PBL Link</button>
<input id = 'go-key-input' type = 'text' class = 'form-control' placeholder = 'Go Key'/>
<input id = 'go-url-input' type = 'text' class = 'form-control' placeholder = 'Go Url (example: http://linkedin.com)'/>
<input id = 'go-description-input' type = 'text' class = 'form-control' placeholder = 'Description'/>

<p>
<h3>PBL Links</h3>
<div id = 'catalogue-container'></div>
</p>

